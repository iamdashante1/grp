"use client";

import React, { createContext, useContext, useMemo } from "react";

type Messages = Record<string, string>;

interface I18nContextValue {
  t: (key: string, params?: Record<string, string | number>) => string;
}

const I18nContext = createContext<I18nContextValue | undefined>(undefined);

const EN: Messages = {
  "nav.brand": "BloodBridge",
  "nav.tagline": "Save Lives Together",
  "nav.home": "Home",
  "nav.bloodBank": "Blood Bank",
  "nav.dashboard": "Dashboard",
  "nav.donate": "Donate",
  "nav.request": "Request",
  "nav.admin": "Admin",
  "nav.about": "About",
  "nav.contact": "Contact",
  "nav.login": "Login",
  "nav.signup": "Sign Up",
  "nav.profile": "Profile",
  "nav.logout": "Logout",
  "nav.language": "Language",

  "home.hero.title1": "Save Lives",
  "home.hero.title2": "One Drop at a Time",
  "home.hero.ctaDonate": "Become a Donor",
  "home.hero.ctaRequest": "Request Blood",
  "home.hero.description": "Join our mission to connect Jamaican blood donors with those in need. Your donation can save up to 3 lives across the island.",
  "home.stats.title": "Impact Statistics",
  "home.stats.activeDonors": "Active Donors",
  "home.stats.livesSaved": "Lives Saved",
  "home.stats.bloodUnits": "Blood Units",
  "home.stats.responseTime": "Response Time",
  "home.stats.monthDonors": "1000+ donors this month",
  "home.stats.joinCommunity": "Join our community",
  "home.cta.title": "Ready to Make a Difference?",
  "home.cta.primary": "Start Donating Today",
  "home.cta.secondary": "Learn More",
  "home.features.title": "Why Choose BloodBridge?",
  "home.features.subtitle": "We're committed to making blood donation safe, accessible, and efficient for all Jamaicans.",
  "home.features.safe.title": "Safe & Secure",
  "home.features.safe.desc": "All blood donations follow strict medical guidelines and safety protocols.",
  "home.features.quick.title": "Quick Response",
  "home.features.quick.desc": "Emergency blood requests are processed within 2 hours of submission.",
  "home.features.verified.title": "Verified Donors",
  "home.features.verified.desc": "All donors are medically screened and verified for safety.",
  "home.features.trusted.title": "Trusted Platform",
  "home.features.trusted.desc": "Partner with hospitals and medical centers island-wide.",
  "home.blood.title": "Current Blood Availability",
  "home.blood.subtitle": "Check real-time availability of blood types in our blood bank",
  "home.blood.cta": "View Full Inventory",
  "home.blood.units": "{count} units",
  "home.cta.blurb": "Join thousands of heroes who are saving lives through blood donation. Every donation matters, every donor is a hero.",
  "home.cta.point1": "Safe & Sterile Process",
  "home.cta.point2": "Medical Professionals",
  "home.cta.point3": "24/7 Emergency Support",
  "home.urgent.title": "Urgent Blood Needs",
  "home.urgent.needed": "Urgently Needed",
  "home.urgent.viewAll": "View All Blood Types",
  "home.auth.welcome": "Welcome back, {name}!",
  "home.auth.ready": "Ready to make a difference today?",
  "home.auth.donations": "Donations",
  "home.auth.viewStats": "View your stats",
  "home.auth.checkAvailability": "Check availability",
  "home.auth.schedule": "Schedule",
  "home.auth.bookAppointment": "Book appointment",
  "home.auth.manageAccount": "Manage account",
  "home.auth.recentActivity": "Recent Activity",
  "home.auth.lastDonation": "Last Donation",
  "home.auth.lastDonationDesc": "You donated {amount} of {blood} blood. Great job!",
  "home.auth.nextEligible": "Next Eligible",
  "home.auth.nextEligibleDesc": "You will be eligible to donate again in {days} days.",

  "auth.login.title": "Login",
  "auth.login.submit": "Login",
  "auth.login.subtitle": "Continue to your BloodBridge account",
  "auth.login.loading": "Logging in...",
  "auth.register.title": "Create your account",
  "auth.register.submit": "Create account",
  "auth.register.subtitle": "Sign up to start donating and tracking your impact",
  "auth.register.loading": "Creating account...",
  "auth.login.success": "Login successful!",
  "auth.login.failed": "Login failed",
  "auth.register.success": "Registration successful!",
  "auth.register.failed": "Registration failed",
  "auth.logout.success": "Logged out successfully",
  "auth.forgotPassword": "Forgot password?",
  "auth.register.passwordsNoMatch": "Passwords do not match",

  "dropdown.selectOption": "Select an option",
  "dropdown.searchPlaceholder": "Search...",
  "dropdown.noOptions": "No options found",
  "dropdown.clearAll": "Clear all ({count})",

  "about.title": "About BloodBridge",
  "about.subtitle": "Connecting Jamaican donors with those in need.",

  "form.fullName": "Full name",
  "form.fullNamePlaceholder": "John Doe",
  "form.email": "Email",
  "form.emailPlaceholder": "you@example.com",
  "form.phone": "Phone",
  "form.phonePlaceholder": "876-123-4567",
  "form.password": "Password",
  "form.passwordPlaceholder": "********",
  "form.confirmPassword": "Confirm password",
  "form.firstName": "First Name",
  "form.firstNamePlaceholder": "John",
  "form.lastName": "Last Name",
  "form.lastNamePlaceholder": "Doe",

  "contact.title": "Contact Us",
  "contact.subtitle": "Have questions about blood donation or need assistance? We're here to help 24/7. Reach out through any of the channels below.",
  "contact.formTitle": "Send us a Message",
  "contact.formSubtitle": "Fill out the form below and we'll get back to you as soon as possible.",
  "contact.getInTouch": "Get in Touch",
  "contact.departments": "Departments",
  "contact.emergencyTitle": "Emergency Contact",
  "contact.emergencySubtitle": "For urgent blood requests or life-threatening emergencies:",
  "contact.subject.label": "Subject",
  "contact.subject.placeholder": "Select a subject",
  "contact.subject.donation": "Blood Donation Inquiry",
  "contact.subject.request": "Blood Request",
  "contact.subject.appointment": "Appointment Scheduling",
  "contact.subject.technical": "Technical Support",
  "contact.subject.partnership": "Partnership Opportunity",
  "contact.subject.general": "General Question",
  "contact.subject.other": "Other",
  "contact.message": "Message",
  "contact.messagePlaceholder": "Tell us how we can help you...",
  "contact.errors.firstNameRequired": "First name is required",
  "contact.errors.lastNameRequired": "Last name is required",
  "contact.errors.emailRequired": "Email is required",
  "contact.errors.emailInvalid": "Please enter a valid email address",
  "contact.errors.subjectRequired": "Please select a subject",
  "contact.errors.messageRequired": "Message is required",
  "contact.errors.messageTooShort": "Message must be at least 10 characters long",
  "contact.toast.success": "Message sent successfully! We'll get back to you soon.",
  "contact.toast.failed": "Failed to send message. Please try again.",
  "contact.info.phone": "Phone",
  "contact.info.phoneDesc": "24/7 Emergency Hotline",
  "contact.info.email": "Email",
  "contact.info.emailDesc": "Get in touch with us",
  "contact.info.address": "Address",
  "contact.info.addressDesc": "Visit our main center",
  "contact.info.hours": "Office Hours",
  "contact.info.hoursDesc": "Blood donation center hours",
  "contact.dept.donor": "Donor Services",
  "contact.dept.donorDesc": "Questions about blood donation, scheduling appointments",
  "contact.dept.requests": "Blood Requests",
  "contact.dept.requestsDesc": "Hospital blood requests, emergency blood needs",
  "contact.dept.general": "General Inquiries",
  "contact.dept.generalDesc": "General questions, partnerships, media inquiries",
  "contact.dept.technical": "Technical Support",
  "contact.dept.technicalDesc": "Website issues, account problems, technical help",

  "donate.schedule": "Schedule Donation",
  "donate.title": "Donate Blood, Save Lives",
  "donate.subtitle": "Schedule your blood donation appointment and join thousands of heroes making a difference.",
  "donate.scheduleTitle": "Schedule Appointment",
  "donate.selectDateTime": "Select Appointment Date & Time",
  "donate.location.label": "Donation Location",
  "donate.location.placeholder": "Select a donation center",
  "donate.eligibility.title": "Eligibility Requirements",
  "donate.eligibility.point1": "At least 17 years old",
  "donate.eligibility.point2": "Weigh at least 50 kg (110 lbs)",
  "donate.eligibility.point3": "In good general health",
  "donate.eligibility.point4": "Last donation was at least 8 weeks ago",
  "donate.expect.title": "What to Expect",
  "donate.expect.durationTitle": "Duration",
  "donate.expect.durationDesc": "Process takes 30-45 minutes",
  "donate.expect.amountTitle": "Amount",
  "donate.expect.amountDesc": "About 450ml of blood collected",
  "donate.help.title": "Need Help?",
  "donate.help.text": "Call us at {phone} for assistance.",
  "donate.centers.title": "Donation Centers",
  "donate.toast.success": "Donation appointment request submitted! We will contact you shortly.",

  "request.submit": "Submit Request",
  "request.title": "Request Blood",
  "request.subtitle": "Submit a blood request for your patient or loved one. We'll match you with available donors.",
  "request.emergency.title": "Emergency Blood Needs?",
  "request.emergency.subtitle": "For immediate emergency blood requirements, please call our 24/7 hotline:",
  "request.toast.success": "Blood request submitted successfully! We will contact you shortly.",
  "request.errors.patientNameRequired": "Patient name is required",
  "request.errors.bloodTypeRequired": "Blood type is required",
  "request.errors.unitsNeeded": "Please specify number of units needed",
  "request.errors.hospitalRequired": "Hospital is required",
  "request.errors.contactNameRequired": "Contact name is required",
  "request.errors.contactPhoneRequired": "Contact phone is required",
  "request.errors.contactPhoneInvalid": "Please enter a valid phone number",
  "request.errors.reasonRequired": "Reason for request is required",

  "blood.title": "Blood Availability",
  "blood.subtitle": "Real-time blood stock levels and availability",
  "blood.searchPlaceholder": "Search blood type...",
  "blood.filterStatus": "Filter by status",
  "blood.allParishes": "All Parishes",

  "common.refresh": "Refresh",

  /* Footer */
  "footer.mission": "Connecting donors and recipients across Jamaica to save lives through timely, safe blood donations.",
  "footer.quickLinks": "Quick Links",
  "footer.resources": "Resources",
  "footer.links.donationGuidelines": "Donation Guidelines",
  "footer.links.healthSafety": "Health & Safety",
  "footer.links.faq": "FAQ",
  "footer.links.privacy": "Privacy Policy",
  "footer.links.terms": "Terms of Service",
  "footer.links.help": "Help Center",
  "footer.links.cookie": "Cookie Policy",
  "footer.contact.title": "Contact",
  "footer.contact.address": "National Blood Transfusion Service, 21 Slipe Pen Road, Kingston, Jamaica",
  "footer.emergency.title": "Emergency Hotline",
  "footer.emergency.hotline": "+1 (876) 123-4567 — Available 24/7",
  "footer.copyright": "© "+ new Date().getFullYear() +" BloodBridge. All rights reserved.",

  "dash.banner.savings": "You have saved {count} lives through your donations. Keep up the amazing work!",
  "dash.totalDonations": "Total Donations",
  "dash.ach.title": "Achievements",
  "dash.showLess": "Show Less",
  "dash.viewAll": "View All",
  "dash.goals.title": "Goals & Milestones",
  "dash.milestones.upcoming": "Upcoming Milestones",
  "dash.ach.first.title": "First Step",
  "dash.ach.first.desc": "Complete your first blood donation",
  "dash.ach.five.title": "Regular Hero",
  "dash.ach.five.desc": "Complete 5 blood donations",
  "dash.ach.ten.title": "Lifesaver",
  "dash.ach.ten.desc": "Complete 10 blood donations",
  "dash.ach.streak.title": "Dedicated",
  "dash.ach.streak.desc": "Donate every eligible period for 3 months",
  "dash.ach.reward": "{points} points",
  "dash.goals.monthly.title": "Monthly Impact",
  "dash.goals.monthly.desc": "Help save 3 lives this month",
  "dash.goals.yearly.title": "Yearly Mission",
  "dash.goals.yearly.desc": "Complete 12 donations this year",
  "dash.milestones.tenth.title": "10th Donation",
  "dash.milestones.tenth.desc": "Just 5 more donations to unlock \"Lifesaver\" badge",
  "dash.quick.emergency": "Emergency blood request",
  "dash.quick.viewImpact": "View Impact",
  "dash.quick.viewImpactDesc": "See lives you've saved",
  "dash.quick.share": "Share Story",
  "dash.quick.shareDesc": "Inspire others to donate",
  "dash.alerts.title": "Recent Alerts & Updates",
  "dash.alerts.lowOBlood": "O- Blood Critically Low",
  "dash.alerts.lowOBloodDesc": "Local hospitals need O- blood urgently",
  "dash.alerts.donationConfirmed": "Donation Confirmed",
  "dash.alerts.donationConfirmedDesc": "Your appointment for {date} is confirmed",
  "dash.alerts.eligibilityUpdate": "Eligibility Update",
  "dash.alerts.time.hours": "{count} hours ago",
  "dash.alerts.time.days": "{count} day(s) ago",

  "notFound.title": "Not Found",
  "notFound.description": "Could not find requested resource",
  "notFound.home": "Return Home",
};

export function I18nProvider({ children }: { children: React.ReactNode }) {
  const t = useMemo(() => {
    return (key: string, params?: Record<string, string | number>) => {
      const template = EN[key] ?? key;
      if (!params) return template;
      return Object.keys(params).reduce((acc, k) => acc.replace(new RegExp(`{${k}}`, "g"), String(params[k])), template);
    };
  }, []);

  const value: I18nContextValue = useMemo(() => ({ t }), [t]);

  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>;
}

export function useI18n() {
  const ctx = useContext(I18nContext);
  if (!ctx) throw new Error("useI18n must be used within I18nProvider");
  return ctx;
}
